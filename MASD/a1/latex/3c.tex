As seen in the test of the code, the criterion holds only when $t$ (named epsilon in the code) is small enough. The only reason the test didn't pass, was because the epsilon value was too big to be accurate. This means that the test is only good when the user knows which scale the epsilon value should be at.
It is obviously not a proper test of convergence since it can be made to fail when given a too large input from the user.